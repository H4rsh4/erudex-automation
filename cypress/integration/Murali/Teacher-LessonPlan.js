/// <reference types="Cypress" />
import Teacherobj from '../../support/pageObjects/Teacherobj'

describe('My First Test Suite', function() 
{
    beforeEach(function() {
        cy.fixture('ConstVarbl').then(function(data) {
                this.data=data  })
      })

    it('Login ',function() {    
        const TeacherOBJ = new Teacherobj()
        cy.visit(this.data.URL)
        // login
        TeacherOBJ.getusername().type(this.data.TeacherUserName)
        TeacherOBJ.getpassword().type(this.data.TeacherPassword)
        TeacherOBJ.getSignin().click({multiple: true})
        TeacherOBJ.getSuccess().click()        
        
    })

    it('Create Lesson Plan',function() {
        const TeacherOBJ = new Teacherobj()
        TeacherOBJ.getCurriculam().click()
        TeacherOBJ.getCreateLesson().click({force: true})
        cy.wait(2000)
        TeacherOBJ.getLessonLang().contains(this.data.Language)
        cy.wait(2000)
        TeacherOBJ.getLessonClass().contains(this.data.Class)
        cy.wait(2000)
        TeacherOBJ.getLessonSubj().contains(this.data.Subject1)
        cy.wait(2000)
        TeacherOBJ.getLessonChapter().contains(this.data.Chapter1)
        cy.wait(2000)
        TeacherOBJ.getLessonTopic().contains(this.data.Topic1).click({force: true})
        cy.wait(2000)
        cy.contains(this.data.Lessonplan).click()
        cy.wait(2000)
        TeacherOBJ.getCalender1().click()
        cy.wait(2000)
        TeacherOBJ.getDate().contains(this.data.Date1).click()
        cy.wait(2000)
        TeacherOBJ.getCalender2().click()
        cy.wait(2000)
        TeacherOBJ.getDate().contains(this.data.Date2).click()
        cy.wait(2000)
        cy.contains('Resources').click({force: true})
        cy.wait(2000)
        cy.contains('Prior Knowledge').click({force: true})
        cy.wait(2000)
        cy.contains('Introduction').click({force: true})
        cy.wait(2000)
        TeacherOBJ.getEditNotes().click()
        cy.wait(2000)
        TeacherOBJ.getcancelDialog().click()
        cy.wait(2000)
        cy.contains(this.data.AddRemove).click()
        cy.wait(2000)
        TeacherOBJ.getAddMultimeddia().click()
        cy.wait(2000)
        cy.contains('Chapter 4').click()
        cy.wait(2000)
        TeacherOBJ.getcloseDialog().click({force: true})
        cy.wait(2000)
        //cy.contains('Add/Remove').click()
        TeacherOBJ.getExternalLink().click()
        cy.wait(2000)
        TeacherOBJ.getLinkname().type(this.data.Organisation)
        cy.wait(2000)
        TeacherOBJ.getURL().type(this.data.URL)
        cy.wait(2000)
        TeacherOBJ.getcloseDialog().click({force: true})
        cy.wait(2000)
        TeacherOBJ.getcancelDialog().click({force: true})
        //cy.get('[ng-click="cancelPlan()"]').click()
        TeacherOBJ.getCreateLessonPlan().click()
    })

    it('View Lesson Plan',function() {
        const TeacherOBJ = new Teacherobj()    
        TeacherOBJ.getViewLesson().click({force: true})
        cy.wait(2000)
        TeacherOBJ.getViewClass().contains(this.data.Class)
        cy.wait(2000)
        TeacherOBJ.getViewsubject().contains(this.data.Subject1)
        cy.wait(2000)
        TeacherOBJ.getViewchapter().contains(this.data.chapter1)
        cy.wait(2000)
        TeacherOBJ.getViewdate().contains(this.data.StartDate)
        cy.wait(2000)
        TeacherOBJ.getCalender1().click()
        cy.wait(2000)
        TeacherOBJ.getDate().contains(this.data.Date1).click()
        cy.wait(2000)
        TeacherOBJ.getCalender2().click()
        cy.wait(2000)
        TeacherOBJ.getDate().contains(this.data.Date2).click()
        cy.wait(2000)
        cy.get('tr td:nth-child(2)').each(($e1,index,$list)=>{
            const text = $e1.text()
            if(text.includes("English"))
            {
                $e1.click()
            }
        })
        
        cy.contains('Lesson Delivery').click({force: true})
        cy.wait(2000)
        cy.contains('Lesson Closure').click({force: true})
        cy.wait(2000)
        cy.contains('Learning Objectives').click({force: true})
        cy.wait(2000)
        TeacherOBJ.getEditLesson().click()
        cy.wait(2000)
        TeacherOBJ.getViewBack().click()
        cy.wait(2000)
        TeacherOBJ.getViewBack().click()
        TeacherOBJ.getLogOut().click({force: true})

    })    
    
})    